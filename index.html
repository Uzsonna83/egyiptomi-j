<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Forgathat√≥ Puzzle</title>
<style>
  body {
    background: #f4f4dc;
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 600px;
    margin: 0;
  }
  #puzzle {
    display: grid;
    grid-template-columns: repeat(4, 80px);
    grid-gap: 2px;
    justify-content: center;
  }
  .tile {
    width: 80px;
    height: 80px;
    transition: transform 0.2s linear;
    cursor: pointer;
  }
  h2 {
    margin-bottom: 10px;
  }
  #status {
    font-size: 1.6em;
    color: green;
    margin-top: 10px;
    text-align: center;
  }
  #timer, #clicks {
    font-size: 1.2em;
    margin: 5px;
    color: #333;
  }
</style>
</head>
<body>

<h2>Rakd ki a k√©pet a forgat√°ssal!</h2>
<div id="timer">Eltelt id≈ë: 0:00</div>
<div id="clicks">Kattint√°sok: 0</div>
<div id="puzzle">
<img src="tiles/tile_1_1.png" class="tile" data-angle="270">
<img src="tiles/tile_1_2.png" class="tile" data-angle="90">
<img src="tiles/tile_1_3.png" class="tile" data-angle="90">
<img src="tiles/tile_1_4.png" class="tile" data-angle="90">
<img src="tiles/tile_2_1.png" class="tile" data-angle="180">
<img src="tiles/tile_2_2.png" class="tile" data-angle="180">
<img src="tiles/tile_2_3.png" class="tile" data-angle="90">
<img src="tiles/tile_2_4.png" class="tile" data-angle="180">
<img src="tiles/tile_3_1.png" class="tile" data-angle="270">
<img src="tiles/tile_3_2.png" class="tile" data-angle="270">
<img src="tiles/tile_3_3.png" class="tile" data-angle="270">
<img src="tiles/tile_3_4.png" class="tile" data-angle="180">
<img src="tiles/tile_4_1.png" class="tile" data-angle="270">
<img src="tiles/tile_4_2.png" class="tile" data-angle="180">
<img src="tiles/tile_4_3.png" class="tile" data-angle="180">
<img src="tiles/tile_4_4.png" class="tile" data-angle="270">
<img src="tiles/tile_5_1.png" class="tile" data-angle="270">
<img src="tiles/tile_5_2.png" class="tile" data-angle="180">
<img src="tiles/tile_5_3.png" class="tile" data-angle="90">
<img src="tiles/tile_5_4.png" class="tile" data-angle="180">

</div>

<p id="status"></p>

<audio id="successSound">
  <source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" type="audio/ogg">
</audio>

<script>
  const tileStates = [];
  let completed = false;
  let started = false;
  let elapsedTime = 0;
  let clickCount = 0;
  let interval = null;

  const timerDisplay = document.getElementById("timer");
  const clicksDisplay = document.getElementById("clicks");
  const status = document.getElementById("status");

  function startTimer() {
    interval = setInterval(() => {
      elapsedTime++;
      const minutes = Math.floor(elapsedTime / 60);
      const seconds = elapsedTime % 60;
      timerDisplay.textContent = "Eltelt id≈ë: " + minutes + ":" + (seconds < 10 ? "0" : "") + seconds;
    }, 1000);
  }

  document.querySelectorAll(".tile").forEach((tile, index) => {
    const initial = parseInt(tile.dataset.angle);
    tileStates[index] = {
      rotation: initial
    };
    tile.style.transform = `rotate(${tileStates[index].rotation}deg)`;

    tile.addEventListener("click", () => {
      if (completed) return;

      if (!started) {
        started = true;
        startTimer();
      }

      clickCount++;
      clicksDisplay.textContent = "Kattint√°sok: " + clickCount;

      tileStates[index].rotation += 90;
      tile.style.transform = `rotate(${tileStates[index].rotation}deg)`;
      tile.dataset.angle = tileStates[index].rotation % 360;

      const allCorrect = tileStates.every(t => t.rotation % 360 === 0);
      if (allCorrect) {
        completed = true;
        clearInterval(interval);
        const minutes = Math.floor(elapsedTime / 60);
        const seconds = elapsedTime % 60;
        const timeText =
          (minutes > 0 ? minutes + " perc " : "") +
          (seconds > 0 ? seconds + " m√°sodperc" : "");
        status.textContent = "üéâ Gratul√°lok! A kirak√°st " + timeText + " alatt, " + clickCount + " kattint√°ssal oldottad meg!";
        document.getElementById("successSound").play();
      } else {
        status.textContent = "";
      }
    });
  });
</script>

</body>
</html>
